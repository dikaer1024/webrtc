# ğŸš€ AIè§†é¢‘ç›‘æ§ç³»ç»Ÿ - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æŒ‡å—

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
æ‘„åƒå¤´(RTSP) â†’ TASK(AIæ£€æµ‹+ç¼–ç ) â†’ ZLM(æµåª’ä½“æœåŠ¡) â†’ å‰ç«¯(HTTP-FLVæ’­æ”¾)
                    â†“
                æŠ¥è­¦å›è°ƒ â†’ DEVICEæ¨¡å—
```

**æ€§èƒ½æŒ‡æ ‡ï¼š**
- âœ… è§†é¢‘å»¶è¿Ÿï¼š~1ç§’ï¼ˆå®æ—¶ç›‘æ§å®Œå…¨å¤Ÿç”¨ï¼‰
- âœ… è§†é¢‘è´¨é‡ï¼š2.5Mbps H.264 é«˜æ¸…
- âœ… AIæ¨ç†ï¼šYOLOv11 å®æ—¶æ£€æµ‹
- âœ… å¹¶å‘èƒ½åŠ›ï¼šæ”¯æŒå¤šè·¯æ‘„åƒå¤´

---

## ğŸ¯ å¿«é€Ÿå¯åŠ¨ï¼ˆ3æ­¥ï¼‰

### 1ï¸âƒ£ å¯åŠ¨ ZLMediaKit æµåª’ä½“æœåŠ¡å™¨

```bash
cd F:\EASYLOT\zlmediakit
.\MediaServer.exe
```

**éªŒè¯å¯åŠ¨æˆåŠŸï¼š** çœ‹åˆ° `[http] http server listen on 80`

---

### 2ï¸âƒ£ å¯åŠ¨ TASK AIæ£€æµ‹æ¨æµç¨‹åº

**æ–¹å¼1ï¼šåŒå‡»å¯åŠ¨è„šæœ¬**
```
F:\EASYLOT\easyaiot-main\TASK\å¯åŠ¨TASK.bat
```

**æ–¹å¼2ï¼šå‘½ä»¤è¡Œå¯åŠ¨**
```bash
cd F:\EASYLOT\easyaiot-main\TASK\build\Release
.\TASK.exe ..\..\config\test.ini
```

**éªŒè¯å¯åŠ¨æˆåŠŸï¼š** çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—
```
[OK] YOLO thread pool initialized
[OK] RTMP encoder initialized: rtmp://127.0.0.1/live/stream_test
[OK] Starting video processing...
```

---

### 3ï¸âƒ£ åœ¨æµè§ˆå™¨æ’­æ”¾å®æ—¶è§†é¢‘

æ‰“å¼€ï¼š
```
file:///F:/EASYLOT/easyaiot-main/TASK/test_player_simple.html
```

**æˆ–è®¿é—®ï¼š**
```
http://localhost/
```
ï¼ˆå¦‚æœZLMé…ç½®äº†wwwç›®å½•ï¼‰

**æ’­æ”¾åœ°å€ï¼š**
```
http://127.0.0.1/live/stream_test.flv
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š`TASK/config/test.ini`

```ini
[video]
rtsp_url=rtsp://admin:password@192.168.1.100/stream
rtmp_url=rtmp://127.0.0.1/live/stream_test
width=1920
height=1080
fps=25

[features]
enable_rtmp=true      # å¯ç”¨RTMPæ¨æµ
enable_ai=true        # å¯ç”¨AIæ£€æµ‹
enable_alarm=true     # å¯ç”¨æŠ¥è­¦

[ai]
enable=true
model_path=weights/yolo11n.onnx
threads=3

[alarm]
confidence_threshold=0.5    # ç½®ä¿¡åº¦é˜ˆå€¼
cooldown_time=5             # æŠ¥è­¦å†·å´æ—¶é—´ï¼ˆç§’ï¼‰
hook_url=http://192.168.1.10:1880/api/alarm/callback  # æŠ¥è­¦å›è°ƒåœ°å€
```

---

## ğŸ”§ å¸¸è§æ“ä½œ

### ä¿®æ”¹è§†é¢‘æº

ç¼–è¾‘ `config/test.ini`ï¼š
```ini
[video]
rtsp_url=rtsp://your_camera_ip/stream
```

### ä¿®æ”¹æ¨æµåœ°å€

```ini
[video]
rtmp_url=rtmp://127.0.0.1/live/your_stream_name
```

å¯¹åº”çš„æ’­æ”¾åœ°å€ï¼š
```
http://127.0.0.1/live/your_stream_name.flv
```

### è°ƒæ•´AIæ£€æµ‹çµæ•åº¦

```ini
[alarm]
confidence_threshold=0.7  # 0-1ä¹‹é—´ï¼Œè¶Šå¤§è¶Šä¸¥æ ¼
```

### æ›´æ¢AIæ¨¡å‹

```ini
[ai]
model_path=weights/yolo11s.onnx  # s=å°æ¨¡å‹ï¼Œm=ä¸­ç­‰ï¼Œl=å¤§æ¨¡å‹
```

---

## ğŸ¨ å‰ç«¯é›†æˆç¤ºä¾‹

### ä½¿ç”¨ flv.js æ’­æ”¾

```html
<!DOCTYPE html>
<html>
<head>
    <title>AIè§†é¢‘ç›‘æ§</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/flv.js/1.6.2/flv.min.js"></script>
</head>
<body>
    <video id="videoElement" width="1280" height="720" controls></video>
    
    <script>
        if (flvjs.isSupported()) {
            var videoElement = document.getElementById('videoElement');
            var flvPlayer = flvjs.createPlayer({
                type: 'flv',
                url: 'http://127.0.0.1/live/stream_test.flv',
                isLive: true,
                hasAudio: false  // æ ¹æ®å®é™…æƒ…å†µè®¾ç½®
            }, {
                enableWorker: true,
                enableStashBuffer: false,  // ç¦ç”¨ç¼“å­˜é™ä½å»¶è¿Ÿ
                stashInitialSize: 128,
                lazyLoad: false,
                autoCleanupSourceBuffer: true
            });
            
            flvPlayer.attachMediaElement(videoElement);
            flvPlayer.load();
            flvPlayer.play();
        }
    </script>
</body>
</html>
```

### å¤šè·¯è§†é¢‘å¢™ï¼ˆ4è·¯ï¼‰

```html
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
    <video id="video1" width="640" height="360" controls></video>
    <video id="video2" width="640" height="360" controls></video>
    <video id="video3" width="640" height="360" controls></video>
    <video id="video4" width="640" height="360" controls></video>
</div>

<script>
const streams = [
    'http://127.0.0.1/live/camera1.flv',
    'http://127.0.0.1/live/camera2.flv',
    'http://127.0.0.1/live/camera3.flv',
    'http://127.0.0.1/live/camera4.flv'
];

streams.forEach((url, index) => {
    const videoElement = document.getElementById(`video${index + 1}`);
    const player = flvjs.createPlayer({
        type: 'flv',
        url: url,
        isLive: true
    });
    player.attachMediaElement(videoElement);
    player.load();
    player.play();
});
</script>
```

---

## ğŸ“Š æŠ¥è­¦å›è°ƒæ ¼å¼

å½“æ£€æµ‹åˆ°ç›®æ ‡æ—¶ï¼ŒTASKä¼šPOSTä»¥ä¸‹JSONåˆ° `hook_url`ï¼š

```json
{
    "timestamp": "2024-10-24T15:30:45",
    "camera_id": "stream_test",
    "detections": [
        {
            "class": "person",
            "confidence": 0.85,
            "bbox": {
                "x": 100,
                "y": 200,
                "width": 150,
                "height": 300
            }
        }
    ]
}
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### TASKå¯åŠ¨å¤±è´¥

**é—®é¢˜1ï¼šæ‰¾ä¸åˆ°DLL**
```
è§£å†³ï¼šç¡®ä¿ onnxruntime.dll åœ¨ TASK.exe åŒç›®å½•
ä½ç½®ï¼šF:\EASYLOT\easyaiot-main\TASK\build\Release\
```

**é—®é¢˜2ï¼šæ¨¡å‹åŠ è½½å¤±è´¥**
```
è§£å†³ï¼šæ£€æŸ¥ weights/yolo11n.onnx æ˜¯å¦å­˜åœ¨
```

### ZLMæ— æ³•æ’­æ”¾

**é—®é¢˜1ï¼šç«¯å£è¢«å ç”¨**
```bash
# æ£€æŸ¥1935ç«¯å£
netstat -ano | findstr "1935"
# æ€æ­»å ç”¨è¿›ç¨‹
taskkill /F /PID <è¿›ç¨‹ID>
```

**é—®é¢˜2ï¼šæµä¸å­˜åœ¨**
```bash
# æ£€æŸ¥æµåˆ—è¡¨
curl "http://127.0.0.1/index/api/getMediaList?secret=<ä½ çš„secret>"
```

### è§†é¢‘å»¶è¿Ÿå¤ªé«˜

1. ç¡®è®¤ä½¿ç”¨ `zlm_lowlatency.ini` é…ç½®
2. æ£€æŸ¥ç½‘ç»œå¸¦å®½
3. å‡å°‘GOPå¤§å°ï¼ˆç¼–è¾‘ `RTMPEncoder.cpp`ï¼‰

---

## ğŸš€ ç”Ÿäº§éƒ¨ç½²å»ºè®®

### 1. ç³»ç»ŸæœåŠ¡åŒ–

ä½¿ç”¨ **NSSM** å°† ZLM å’Œ TASK æ³¨å†Œä¸º Windows æœåŠ¡ï¼š

```bash
# ä¸‹è½½ nssm
# æ³¨å†ŒZLMæœåŠ¡
nssm install ZLMediaKit "F:\EASYLOT\zlmediakit\MediaServer.exe"
nssm start ZLMediaKit

# æ³¨å†ŒTASKæœåŠ¡
nssm install TaskAI "F:\EASYLOT\easyaiot-main\TASK\build\Release\TASK.exe" "..\..\config\test.ini"
nssm start TaskAI
```

### 2. å¤šæ‘„åƒå¤´éƒ¨ç½²

ä¸ºæ¯ä¸ªæ‘„åƒå¤´åˆ›å»ºç‹¬ç«‹é…ç½®æ–‡ä»¶ï¼š

```
config/
  â”œâ”€â”€ camera1.ini  (stream_name=camera1)
  â”œâ”€â”€ camera2.ini  (stream_name=camera2)
  â””â”€â”€ camera3.ini  (stream_name=camera3)
```

å¯åŠ¨å¤šä¸ªTASKå®ä¾‹ï¼š
```bash
start TASK.exe config/camera1.ini
start TASK.exe config/camera2.ini
start TASK.exe config/camera3.ini
```

### 3. è´Ÿè½½å‡è¡¡

- å•å°æœåŠ¡å™¨ï¼š3-5è·¯1080pè§†é¢‘ï¼ˆå–å†³äºCPUï¼‰
- å¤šå°æœåŠ¡å™¨ï¼šéƒ¨ç½²å¤šä¸ªZLMï¼Œå‰ç«¯è½®è¯¢æˆ–ä½¿ç”¨Nginxè´Ÿè½½å‡è¡¡

### 4. æ—¥å¿—ç®¡ç†

æ—¥å¿—ä½ç½®ï¼š
- TASKæ—¥å¿—ï¼šæ§åˆ¶å°è¾“å‡ºï¼ˆå¯é‡å®šå‘ï¼‰
- ZLMæ—¥å¿—ï¼š`F:\EASYLOT\zlmediakit\log\`

å»ºè®®é…ç½®æ—¥å¿—è½®è½¬ï¼Œé¿å…ç£ç›˜å æ»¡ã€‚

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### CPUä¼˜åŒ–

```ini
[ai]
threads=4  # æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´ï¼ˆæ¨èç‰©ç†æ ¸å¿ƒæ•°-1ï¼‰
```

### å†…å­˜ä¼˜åŒ–

```cpp
// RTMPEncoder.cpp
_codecCtx->rc_buffer_size = _codecCtx->bit_rate / 4;  // å‡å°ç¼“å†²
```

### å¸¦å®½ä¼˜åŒ–

```cpp
_codecCtx->bit_rate = 1500000;  // é™ä½ç ç‡åˆ°1.5Mbps
_codecCtx->gop_size = 25;       // å¢å¤§GOPåˆ°1ç§’
```

---

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¿®æ”¹ZLMé»˜è®¤å¯†é’¥**
   ç¼–è¾‘ `config.ini`ï¼š
   ```ini
   secret=your_strong_random_key
   ```

2. **é™åˆ¶è®¿é—®IP**
   åœ¨ZLMé…ç½®æˆ–ä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®

3. **HTTPS/WSS**
   é…ç½®SSLè¯ä¹¦ï¼Œå¯ç”¨åŠ å¯†ä¼ è¾“

4. **è®¤è¯é‰´æƒ**
   å®ç°tokenéªŒè¯ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜è¯·æ£€æŸ¥ï¼š
1. âœ… TASKæ—¥å¿—ï¼ˆæ§åˆ¶å°è¾“å‡ºï¼‰
2. âœ… ZLMæ—¥å¿—ï¼ˆ`zlmediakit/log/`ï¼‰
3. âœ… æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰

**ç³»ç»Ÿä¿¡æ¯ï¼š**
- TASKç‰ˆæœ¬ï¼š1.0.0
- ZLMediaKitï¼šæ¨èæœ€æ–°ç¨³å®šç‰ˆ
- AIæ¨¡å‹ï¼šYOLOv11
- è§†é¢‘ç¼–ç ï¼šH.264
- æµåª’ä½“åè®®ï¼šRTMPæ¨æµ + HTTP-FLVæ’­æ”¾

---

**ç¥ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰


## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
æ‘„åƒå¤´(RTSP) â†’ TASK(AIæ£€æµ‹+ç¼–ç ) â†’ ZLM(æµåª’ä½“æœåŠ¡) â†’ å‰ç«¯(HTTP-FLVæ’­æ”¾)
                    â†“
                æŠ¥è­¦å›è°ƒ â†’ DEVICEæ¨¡å—
```

**æ€§èƒ½æŒ‡æ ‡ï¼š**
- âœ… è§†é¢‘å»¶è¿Ÿï¼š~1ç§’ï¼ˆå®æ—¶ç›‘æ§å®Œå…¨å¤Ÿç”¨ï¼‰
- âœ… è§†é¢‘è´¨é‡ï¼š2.5Mbps H.264 é«˜æ¸…
- âœ… AIæ¨ç†ï¼šYOLOv11 å®æ—¶æ£€æµ‹
- âœ… å¹¶å‘èƒ½åŠ›ï¼šæ”¯æŒå¤šè·¯æ‘„åƒå¤´

---

## ğŸ¯ å¿«é€Ÿå¯åŠ¨ï¼ˆ3æ­¥ï¼‰

### 1ï¸âƒ£ å¯åŠ¨ ZLMediaKit æµåª’ä½“æœåŠ¡å™¨

```bash
cd F:\EASYLOT\zlmediakit
.\MediaServer.exe
```

**éªŒè¯å¯åŠ¨æˆåŠŸï¼š** çœ‹åˆ° `[http] http server listen on 80`

---

### 2ï¸âƒ£ å¯åŠ¨ TASK AIæ£€æµ‹æ¨æµç¨‹åº

**æ–¹å¼1ï¼šåŒå‡»å¯åŠ¨è„šæœ¬**
```
F:\EASYLOT\easyaiot-main\TASK\å¯åŠ¨TASK.bat
```

**æ–¹å¼2ï¼šå‘½ä»¤è¡Œå¯åŠ¨**
```bash
cd F:\EASYLOT\easyaiot-main\TASK\build\Release
.\TASK.exe ..\..\config\test.ini
```

**éªŒè¯å¯åŠ¨æˆåŠŸï¼š** çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—
```
[OK] YOLO thread pool initialized
[OK] RTMP encoder initialized: rtmp://127.0.0.1/live/stream_test
[OK] Starting video processing...
```

---

### 3ï¸âƒ£ åœ¨æµè§ˆå™¨æ’­æ”¾å®æ—¶è§†é¢‘

æ‰“å¼€ï¼š
```
file:///F:/EASYLOT/easyaiot-main/TASK/test_player_simple.html
```

**æˆ–è®¿é—®ï¼š**
```
http://localhost/
```
ï¼ˆå¦‚æœZLMé…ç½®äº†wwwç›®å½•ï¼‰

**æ’­æ”¾åœ°å€ï¼š**
```
http://127.0.0.1/live/stream_test.flv
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š`TASK/config/test.ini`

```ini
[video]
rtsp_url=rtsp://admin:password@192.168.1.100/stream
rtmp_url=rtmp://127.0.0.1/live/stream_test
width=1920
height=1080
fps=25

[features]
enable_rtmp=true      # å¯ç”¨RTMPæ¨æµ
enable_ai=true        # å¯ç”¨AIæ£€æµ‹
enable_alarm=true     # å¯ç”¨æŠ¥è­¦

[ai]
enable=true
model_path=weights/yolo11n.onnx
threads=3

[alarm]
confidence_threshold=0.5    # ç½®ä¿¡åº¦é˜ˆå€¼
cooldown_time=5             # æŠ¥è­¦å†·å´æ—¶é—´ï¼ˆç§’ï¼‰
hook_url=http://192.168.1.10:1880/api/alarm/callback  # æŠ¥è­¦å›è°ƒåœ°å€
```

---

## ğŸ”§ å¸¸è§æ“ä½œ

### ä¿®æ”¹è§†é¢‘æº

ç¼–è¾‘ `config/test.ini`ï¼š
```ini
[video]
rtsp_url=rtsp://your_camera_ip/stream
```

### ä¿®æ”¹æ¨æµåœ°å€

```ini
[video]
rtmp_url=rtmp://127.0.0.1/live/your_stream_name
```

å¯¹åº”çš„æ’­æ”¾åœ°å€ï¼š
```
http://127.0.0.1/live/your_stream_name.flv
```

### è°ƒæ•´AIæ£€æµ‹çµæ•åº¦

```ini
[alarm]
confidence_threshold=0.7  # 0-1ä¹‹é—´ï¼Œè¶Šå¤§è¶Šä¸¥æ ¼
```

### æ›´æ¢AIæ¨¡å‹

```ini
[ai]
model_path=weights/yolo11s.onnx  # s=å°æ¨¡å‹ï¼Œm=ä¸­ç­‰ï¼Œl=å¤§æ¨¡å‹
```

---

## ğŸ¨ å‰ç«¯é›†æˆç¤ºä¾‹

### ä½¿ç”¨ flv.js æ’­æ”¾

```html
<!DOCTYPE html>
<html>
<head>
    <title>AIè§†é¢‘ç›‘æ§</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/flv.js/1.6.2/flv.min.js"></script>
</head>
<body>
    <video id="videoElement" width="1280" height="720" controls></video>
    
    <script>
        if (flvjs.isSupported()) {
            var videoElement = document.getElementById('videoElement');
            var flvPlayer = flvjs.createPlayer({
                type: 'flv',
                url: 'http://127.0.0.1/live/stream_test.flv',
                isLive: true,
                hasAudio: false  // æ ¹æ®å®é™…æƒ…å†µè®¾ç½®
            }, {
                enableWorker: true,
                enableStashBuffer: false,  // ç¦ç”¨ç¼“å­˜é™ä½å»¶è¿Ÿ
                stashInitialSize: 128,
                lazyLoad: false,
                autoCleanupSourceBuffer: true
            });
            
            flvPlayer.attachMediaElement(videoElement);
            flvPlayer.load();
            flvPlayer.play();
        }
    </script>
</body>
</html>
```

### å¤šè·¯è§†é¢‘å¢™ï¼ˆ4è·¯ï¼‰

```html
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
    <video id="video1" width="640" height="360" controls></video>
    <video id="video2" width="640" height="360" controls></video>
    <video id="video3" width="640" height="360" controls></video>
    <video id="video4" width="640" height="360" controls></video>
</div>

<script>
const streams = [
    'http://127.0.0.1/live/camera1.flv',
    'http://127.0.0.1/live/camera2.flv',
    'http://127.0.0.1/live/camera3.flv',
    'http://127.0.0.1/live/camera4.flv'
];

streams.forEach((url, index) => {
    const videoElement = document.getElementById(`video${index + 1}`);
    const player = flvjs.createPlayer({
        type: 'flv',
        url: url,
        isLive: true
    });
    player.attachMediaElement(videoElement);
    player.load();
    player.play();
});
</script>
```

---

## ğŸ“Š æŠ¥è­¦å›è°ƒæ ¼å¼

å½“æ£€æµ‹åˆ°ç›®æ ‡æ—¶ï¼ŒTASKä¼šPOSTä»¥ä¸‹JSONåˆ° `hook_url`ï¼š

```json
{
    "timestamp": "2024-10-24T15:30:45",
    "camera_id": "stream_test",
    "detections": [
        {
            "class": "person",
            "confidence": 0.85,
            "bbox": {
                "x": 100,
                "y": 200,
                "width": 150,
                "height": 300
            }
        }
    ]
}
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### TASKå¯åŠ¨å¤±è´¥

**é—®é¢˜1ï¼šæ‰¾ä¸åˆ°DLL**
```
è§£å†³ï¼šç¡®ä¿ onnxruntime.dll åœ¨ TASK.exe åŒç›®å½•
ä½ç½®ï¼šF:\EASYLOT\easyaiot-main\TASK\build\Release\
```

**é—®é¢˜2ï¼šæ¨¡å‹åŠ è½½å¤±è´¥**
```
è§£å†³ï¼šæ£€æŸ¥ weights/yolo11n.onnx æ˜¯å¦å­˜åœ¨
```

### ZLMæ— æ³•æ’­æ”¾

**é—®é¢˜1ï¼šç«¯å£è¢«å ç”¨**
```bash
# æ£€æŸ¥1935ç«¯å£
netstat -ano | findstr "1935"
# æ€æ­»å ç”¨è¿›ç¨‹
taskkill /F /PID <è¿›ç¨‹ID>
```

**é—®é¢˜2ï¼šæµä¸å­˜åœ¨**
```bash
# æ£€æŸ¥æµåˆ—è¡¨
curl "http://127.0.0.1/index/api/getMediaList?secret=<ä½ çš„secret>"
```

### è§†é¢‘å»¶è¿Ÿå¤ªé«˜

1. ç¡®è®¤ä½¿ç”¨ `zlm_lowlatency.ini` é…ç½®
2. æ£€æŸ¥ç½‘ç»œå¸¦å®½
3. å‡å°‘GOPå¤§å°ï¼ˆç¼–è¾‘ `RTMPEncoder.cpp`ï¼‰

---

## ğŸš€ ç”Ÿäº§éƒ¨ç½²å»ºè®®

### 1. ç³»ç»ŸæœåŠ¡åŒ–

ä½¿ç”¨ **NSSM** å°† ZLM å’Œ TASK æ³¨å†Œä¸º Windows æœåŠ¡ï¼š

```bash
# ä¸‹è½½ nssm
# æ³¨å†ŒZLMæœåŠ¡
nssm install ZLMediaKit "F:\EASYLOT\zlmediakit\MediaServer.exe"
nssm start ZLMediaKit

# æ³¨å†ŒTASKæœåŠ¡
nssm install TaskAI "F:\EASYLOT\easyaiot-main\TASK\build\Release\TASK.exe" "..\..\config\test.ini"
nssm start TaskAI
```

### 2. å¤šæ‘„åƒå¤´éƒ¨ç½²

ä¸ºæ¯ä¸ªæ‘„åƒå¤´åˆ›å»ºç‹¬ç«‹é…ç½®æ–‡ä»¶ï¼š

```
config/
  â”œâ”€â”€ camera1.ini  (stream_name=camera1)
  â”œâ”€â”€ camera2.ini  (stream_name=camera2)
  â””â”€â”€ camera3.ini  (stream_name=camera3)
```

å¯åŠ¨å¤šä¸ªTASKå®ä¾‹ï¼š
```bash
start TASK.exe config/camera1.ini
start TASK.exe config/camera2.ini
start TASK.exe config/camera3.ini
```

### 3. è´Ÿè½½å‡è¡¡

- å•å°æœåŠ¡å™¨ï¼š3-5è·¯1080pè§†é¢‘ï¼ˆå–å†³äºCPUï¼‰
- å¤šå°æœåŠ¡å™¨ï¼šéƒ¨ç½²å¤šä¸ªZLMï¼Œå‰ç«¯è½®è¯¢æˆ–ä½¿ç”¨Nginxè´Ÿè½½å‡è¡¡

### 4. æ—¥å¿—ç®¡ç†

æ—¥å¿—ä½ç½®ï¼š
- TASKæ—¥å¿—ï¼šæ§åˆ¶å°è¾“å‡ºï¼ˆå¯é‡å®šå‘ï¼‰
- ZLMæ—¥å¿—ï¼š`F:\EASYLOT\zlmediakit\log\`

å»ºè®®é…ç½®æ—¥å¿—è½®è½¬ï¼Œé¿å…ç£ç›˜å æ»¡ã€‚

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### CPUä¼˜åŒ–

```ini
[ai]
threads=4  # æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´ï¼ˆæ¨èç‰©ç†æ ¸å¿ƒæ•°-1ï¼‰
```

### å†…å­˜ä¼˜åŒ–

```cpp
// RTMPEncoder.cpp
_codecCtx->rc_buffer_size = _codecCtx->bit_rate / 4;  // å‡å°ç¼“å†²
```

### å¸¦å®½ä¼˜åŒ–

```cpp
_codecCtx->bit_rate = 1500000;  // é™ä½ç ç‡åˆ°1.5Mbps
_codecCtx->gop_size = 25;       // å¢å¤§GOPåˆ°1ç§’
```

---

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¿®æ”¹ZLMé»˜è®¤å¯†é’¥**
   ç¼–è¾‘ `config.ini`ï¼š
   ```ini
   secret=your_strong_random_key
   ```

2. **é™åˆ¶è®¿é—®IP**
   åœ¨ZLMé…ç½®æˆ–ä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®

3. **HTTPS/WSS**
   é…ç½®SSLè¯ä¹¦ï¼Œå¯ç”¨åŠ å¯†ä¼ è¾“

4. **è®¤è¯é‰´æƒ**
   å®ç°tokenéªŒè¯ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜è¯·æ£€æŸ¥ï¼š
1. âœ… TASKæ—¥å¿—ï¼ˆæ§åˆ¶å°è¾“å‡ºï¼‰
2. âœ… ZLMæ—¥å¿—ï¼ˆ`zlmediakit/log/`ï¼‰
3. âœ… æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰

**ç³»ç»Ÿä¿¡æ¯ï¼š**
- TASKç‰ˆæœ¬ï¼š1.0.0
- ZLMediaKitï¼šæ¨èæœ€æ–°ç¨³å®šç‰ˆ
- AIæ¨¡å‹ï¼šYOLOv11
- è§†é¢‘ç¼–ç ï¼šH.264
- æµåª’ä½“åè®®ï¼šRTMPæ¨æµ + HTTP-FLVæ’­æ”¾

---

**ç¥ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
# TASK模块配置文件示例
# 请复制此文件并根据实际情况修改

# ============================================
# 视频流配置
# ============================================
[video]
# RTSP输入流地址（必需）
rtsp_url=rtsp://admin:password@192.168.1.64:554/Streaming/Channels/101

# RTMP推流地址（可选，如果启用推流功能）
rtmp_url=rtmp://localhost:1935/live/stream_123


# ============================================
# AI推理配置
# ============================================
[ai]
# 是否启用AI推理（true/false）
enable=true

# YOLOv11模型路径（ONNX格式）
model_path=F:/models/yolov11n.onnx

# 类别文件路径（每行一个类别名）
classes_path=F:/models/coco.names

# 推理线程数量（建议1-4）
threads=3


# ============================================
# 报警配置
# ============================================
[alarm]
# 是否启用报警检测（true/false）
enable=true

# HTTP回调地址（告警时POST到此URL）
# 格式: http://host:port/path/{task_id}
hook_url=http://localhost:5000/api/alarm/callback/123

# 报警置信度阈值（0.0-1.0）
confidence_threshold=0.6

# 报警冷却时间（秒）
cooldown_time=30


# ============================================
# 功能开关
# ============================================
[features]
# 启用RTMP推流（true/false）
enable_rtmp=false

# 启用检测框绘制（在推流中）
enable_draw=true

# 启用报警检测
enable_alarm=true


# ============================================
# 报警区域配置
# ============================================
[regions]
# 报警区域定义（JSON数组格式：[[x1,y1],[x2,y2],[x3,y3]...]）
# 至少需要3个点组成多边形
# 坐标系：相对于视频画面的像素坐标

# 区域1：入口区域示例
area_1=[[100,200],[500,200],[500,600],[100,600]]

# 区域2：危险区域示例
area_2=[[600,100],[900,100],[900,400],[600,400]]

# 可以定义多个区域，每个区域独立检测
# area_3=[[...]]


# ============================================
# 配置说明
# ============================================
# 1. RTSP URL格式:
#    rtsp://username:password@ip:port/path
#    例如: rtsp://admin:123456@192.168.1.64:554/Streaming/Channels/101
#
# 2. 模型文件:
#    - 支持YOLOv11的ONNX格式模型
#    - 可以使用Ultralytics导出: yolo export model=yolov11n.pt format=onnx
#
# 3. 报警区域:
#    - 使用JSON数组格式定义多边形区域
#    - 前端绘制的区域会自动转换为此格式
#    - 坐标相对于视频分辨率（例如1920x1080）
#
# 4. HTTP回调:
#    - 检测到报警时会POST JSON到此URL
#    - JSON格式见文档
#    - AI模块会接收并处理告警

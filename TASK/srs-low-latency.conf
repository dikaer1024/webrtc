# SRS Ultra Low Latency Configuration
# 超低延迟RTMP/HTTP-FLV配置

listen              1935;
max_connections     1000;
daemon              off;
srs_log_tank        console;

http_server {
    enabled         on;
    listen          8080;
    dir             ./objs/nginx/html;
}

http_api {
    enabled         on;
    listen          1985;
}

stats {
    network         0;
}

vhost __defaultVhost__ {
    # 通用配置
    enabled         on;
    
    # RTMP低延迟配置
    tcp_nodelay     on;
    min_latency     on;
    
    # GOP缓存：禁用以降低延迟
    gop_cache       off;
    queue_length    5;
    
    # 发布配置
    publish {
        mr          off;
        mr_latency  0;
        firstpkt_timeout 20000;
        normal_timeout   5000;
    }
    
    # 播放配置 - 关键！最小化缓冲
    play {
        gop_cache       off;
        queue_length    5;
        mw_latency      100;     # 最小等待延迟100ms
        mw_msgs         0;       # 不缓存消息
        mix_correct     off;     # 不校正时间戳
    }
    
    # HTTP-FLV低延迟配置
    http_remux {
        enabled     on;
        mount       [vhost]/[app]/[stream].flv;
        fast_cache  1;
    }
    
    # HLS禁用（不需要）
    hls {
        enabled         off;
    }
    
    # DVR禁用（不需要录制）
    dvr {
        enabled         off;
    }
    
    # 转码禁用（不需要）
    transcode {
        enabled     off;
    }
}

# 超低延迟RTMP/HTTP-FLV配置

listen              1935;
max_connections     1000;
daemon              off;
srs_log_tank        console;

http_server {
    enabled         on;
    listen          8080;
    dir             ./objs/nginx/html;
}

http_api {
    enabled         on;
    listen          1985;
}

stats {
    network         0;
}

vhost __defaultVhost__ {
    # 通用配置
    enabled         on;
    
    # RTMP低延迟配置
    tcp_nodelay     on;
    min_latency     on;
    
    # GOP缓存：禁用以降低延迟
    gop_cache       off;
    queue_length    5;
    
    # 发布配置
    publish {
        mr          off;
        mr_latency  0;
        firstpkt_timeout 20000;
        normal_timeout   5000;
    }
    
    # 播放配置 - 关键！最小化缓冲
    play {
        gop_cache       off;
        queue_length    5;
        mw_latency      100;     # 最小等待延迟100ms
        mw_msgs         0;       # 不缓存消息
        mix_correct     off;     # 不校正时间戳
    }
    
    # HTTP-FLV低延迟配置
    http_remux {
        enabled     on;
        mount       [vhost]/[app]/[stream].flv;
        fast_cache  1;
    }
    
    # HLS禁用（不需要）
    hls {
        enabled         off;
    }
    
    # DVR禁用（不需要录制）
    dvr {
        enabled         off;
    }
    
    # 转码禁用（不需要）
    transcode {
        enabled     off;
    }
}

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 